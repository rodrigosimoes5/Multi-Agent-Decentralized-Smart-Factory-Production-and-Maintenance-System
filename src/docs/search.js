window.pdocSearch = (function(){
/** elasticlunr - http://weixsong.github.io * Copyright (C) 2017 Oliver Nightingale * Copyright (C) 2017 Wei Song * MIT Licensed */!function(){function e(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var t=function(e){var n=new t.Index;return n.pipeline.add(t.trimmer,t.stopWordFilter,t.stemmer),e&&e.call(n,n),n};t.version="0.9.5",lunr=t,t.utils={},t.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),t.utils.toString=function(e){return void 0===e||null===e?"":e.toString()},t.EventEmitter=function(){this.events={}},t.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if("function"!=typeof t)throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},t.EventEmitter.prototype.removeListener=function(e,t){if(this.hasHandler(e)){var n=this.events[e].indexOf(t);-1!==n&&(this.events[e].splice(n,1),0==this.events[e].length&&delete this.events[e])}},t.EventEmitter.prototype.emit=function(e){if(this.hasHandler(e)){var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(void 0,t)},this)}},t.EventEmitter.prototype.hasHandler=function(e){return e in this.events},t.tokenizer=function(e){if(!arguments.length||null===e||void 0===e)return[];if(Array.isArray(e)){var n=e.filter(function(e){return null===e||void 0===e?!1:!0});n=n.map(function(e){return t.utils.toString(e).toLowerCase()});var i=[];return n.forEach(function(e){var n=e.split(t.tokenizer.seperator);i=i.concat(n)},this),i}return e.toString().trim().toLowerCase().split(t.tokenizer.seperator)},t.tokenizer.defaultSeperator=/[\s\-]+/,t.tokenizer.seperator=t.tokenizer.defaultSeperator,t.tokenizer.setSeperator=function(e){null!==e&&void 0!==e&&"object"==typeof e&&(t.tokenizer.seperator=e)},t.tokenizer.resetSeperator=function(){t.tokenizer.seperator=t.tokenizer.defaultSeperator},t.tokenizer.getSeperator=function(){return t.tokenizer.seperator},t.Pipeline=function(){this._queue=[]},t.Pipeline.registeredFunctions={},t.Pipeline.registerFunction=function(e,n){n in t.Pipeline.registeredFunctions&&t.utils.warn("Overwriting existing registered function: "+n),e.label=n,t.Pipeline.registeredFunctions[n]=e},t.Pipeline.getRegisteredFunction=function(e){return e in t.Pipeline.registeredFunctions!=!0?null:t.Pipeline.registeredFunctions[e]},t.Pipeline.warnIfFunctionNotRegistered=function(e){var n=e.label&&e.label in this.registeredFunctions;n||t.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",e)},t.Pipeline.load=function(e){var n=new t.Pipeline;return e.forEach(function(e){var i=t.Pipeline.getRegisteredFunction(e);if(!i)throw new Error("Cannot load un-registered function: "+e);n.add(i)}),n},t.Pipeline.prototype.add=function(){var e=Array.prototype.slice.call(arguments);e.forEach(function(e){t.Pipeline.warnIfFunctionNotRegistered(e),this._queue.push(e)},this)},t.Pipeline.prototype.after=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i+1,0,n)},t.Pipeline.prototype.before=function(e,n){t.Pipeline.warnIfFunctionNotRegistered(n);var i=this._queue.indexOf(e);if(-1===i)throw new Error("Cannot find existingFn");this._queue.splice(i,0,n)},t.Pipeline.prototype.remove=function(e){var t=this._queue.indexOf(e);-1!==t&&this._queue.splice(t,1)},t.Pipeline.prototype.run=function(e){for(var t=[],n=e.length,i=this._queue.length,o=0;n>o;o++){for(var r=e[o],s=0;i>s&&(r=this._queue[s](r,o,e),void 0!==r&&null!==r);s++);void 0!==r&&null!==r&&t.push(r)}return t},t.Pipeline.prototype.reset=function(){this._queue=[]},t.Pipeline.prototype.get=function(){return this._queue},t.Pipeline.prototype.toJSON=function(){return this._queue.map(function(e){return t.Pipeline.warnIfFunctionNotRegistered(e),e.label})},t.Index=function(){this._fields=[],this._ref="id",this.pipeline=new t.Pipeline,this.documentStore=new t.DocumentStore,this.index={},this.eventEmitter=new t.EventEmitter,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},t.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},t.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},t.Index.load=function(e){e.version!==t.version&&t.utils.warn("version mismatch: current "+t.version+" importing "+e.version);var n=new this;n._fields=e.fields,n._ref=e.ref,n.documentStore=t.DocumentStore.load(e.documentStore),n.pipeline=t.Pipeline.load(e.pipeline),n.index={};for(var i in e.index)n.index[i]=t.InvertedIndex.load(e.index[i]);return n},t.Index.prototype.addField=function(e){return this._fields.push(e),this.index[e]=new t.InvertedIndex,this},t.Index.prototype.setRef=function(e){return this._ref=e,this},t.Index.prototype.saveDocument=function(e){return this.documentStore=new t.DocumentStore(e),this},t.Index.prototype.addDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.addDoc(i,e),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));this.documentStore.addFieldLength(i,n,o.length);var r={};o.forEach(function(e){e in r?r[e]+=1:r[e]=1},this);for(var s in r){var u=r[s];u=Math.sqrt(u),this.index[n].addToken(s,{ref:i,tf:u})}},this),n&&this.eventEmitter.emit("add",e,this)}},t.Index.prototype.removeDocByRef=function(e){if(e&&this.documentStore.isDocStored()!==!1&&this.documentStore.hasDoc(e)){var t=this.documentStore.getDoc(e);this.removeDoc(t,!1)}},t.Index.prototype.removeDoc=function(e,n){if(e){var n=void 0===n?!0:n,i=e[this._ref];this.documentStore.hasDoc(i)&&(this.documentStore.removeDoc(i),this._fields.forEach(function(n){var o=this.pipeline.run(t.tokenizer(e[n]));o.forEach(function(e){this.index[n].removeToken(e,i)},this)},this),n&&this.eventEmitter.emit("remove",e,this))}},t.Index.prototype.updateDoc=function(e,t){var t=void 0===t?!0:t;this.removeDocByRef(e[this._ref],!1),this.addDoc(e,!1),t&&this.eventEmitter.emit("update",e,this)},t.Index.prototype.idf=function(e,t){var n="@"+t+"/"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,n))return this._idfCache[n];var i=this.index[t].getDocFreq(e),o=1+Math.log(this.documentStore.length/(i+1));return this._idfCache[n]=o,o},t.Index.prototype.getFields=function(){return this._fields.slice()},t.Index.prototype.search=function(e,n){if(!e)return[];e="string"==typeof e?{any:e}:JSON.parse(JSON.stringify(e));var i=null;null!=n&&(i=JSON.stringify(n));for(var o=new t.Configuration(i,this.getFields()).get(),r={},s=Object.keys(e),u=0;u<s.length;u++){var a=s[u];r[a]=this.pipeline.run(t.tokenizer(e[a]))}var l={};for(var c in o){var d=r[c]||r.any;if(d){var f=this.fieldSearch(d,c,o),h=o[c].boost;for(var p in f)f[p]=f[p]*h;for(var p in f)p in l?l[p]+=f[p]:l[p]=f[p]}}var v,g=[];for(var p in l)v={ref:p,score:l[p]},this.documentStore.hasDoc(p)&&(v.doc=this.documentStore.getDoc(p)),g.push(v);return g.sort(function(e,t){return t.score-e.score}),g},t.Index.prototype.fieldSearch=function(e,t,n){var i=n[t].bool,o=n[t].expand,r=n[t].boost,s=null,u={};return 0!==r?(e.forEach(function(e){var n=[e];1==o&&(n=this.index[t].expandToken(e));var r={};n.forEach(function(n){var o=this.index[t].getDocs(n),a=this.idf(n,t);if(s&&"AND"==i){var l={};for(var c in s)c in o&&(l[c]=o[c]);o=l}n==e&&this.fieldSearchStats(u,n,o);for(var c in o){var d=this.index[t].getTermFrequency(n,c),f=this.documentStore.getFieldLength(c,t),h=1;0!=f&&(h=1/Math.sqrt(f));var p=1;n!=e&&(p=.15*(1-(n.length-e.length)/n.length));var v=d*a*h*p;c in r?r[c]+=v:r[c]=v}},this),s=this.mergeScores(s,r,i)},this),s=this.coordNorm(s,u,e.length)):void 0},t.Index.prototype.mergeScores=function(e,t,n){if(!e)return t;if("AND"==n){var i={};for(var o in t)o in e&&(i[o]=e[o]+t[o]);return i}for(var o in t)o in e?e[o]+=t[o]:e[o]=t[o];return e},t.Index.prototype.fieldSearchStats=function(e,t,n){for(var i in n)i in e?e[i].push(t):e[i]=[t]},t.Index.prototype.coordNorm=function(e,t,n){for(var i in e)if(i in t){var o=t[i].length;e[i]=e[i]*o/n}return e},t.Index.prototype.toJSON=function(){var e={};return this._fields.forEach(function(t){e[t]=this.index[t].toJSON()},this),{version:t.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),index:e,pipeline:this.pipeline.toJSON()}},t.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},t.DocumentStore=function(e){this._save=null===e||void 0===e?!0:e,this.docs={},this.docInfo={},this.length=0},t.DocumentStore.load=function(e){var t=new this;return t.length=e.length,t.docs=e.docs,t.docInfo=e.docInfo,t._save=e.save,t},t.DocumentStore.prototype.isDocStored=function(){return this._save},t.DocumentStore.prototype.addDoc=function(t,n){this.hasDoc(t)||this.length++,this.docs[t]=this._save===!0?e(n):null},t.DocumentStore.prototype.getDoc=function(e){return this.hasDoc(e)===!1?null:this.docs[e]},t.DocumentStore.prototype.hasDoc=function(e){return e in this.docs},t.DocumentStore.prototype.removeDoc=function(e){this.hasDoc(e)&&(delete this.docs[e],delete this.docInfo[e],this.length--)},t.DocumentStore.prototype.addFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&(this.docInfo[e]||(this.docInfo[e]={}),this.docInfo[e][t]=n)},t.DocumentStore.prototype.updateFieldLength=function(e,t,n){null!==e&&void 0!==e&&0!=this.hasDoc(e)&&this.addFieldLength(e,t,n)},t.DocumentStore.prototype.getFieldLength=function(e,t){return null===e||void 0===e?0:e in this.docs&&t in this.docInfo[e]?this.docInfo[e][t]:0},t.DocumentStore.prototype.toJSON=function(){return{docs:this.docs,docInfo:this.docInfo,length:this.length,save:this._save}},t.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",i="[aeiouy]",o=n+"[^aeiouy]*",r=i+"[aeiou]*",s="^("+o+")?"+r+o,u="^("+o+")?"+r+o+"("+r+")?$",a="^("+o+")?"+r+o+r+o,l="^("+o+")?"+i,c=new RegExp(s),d=new RegExp(a),f=new RegExp(u),h=new RegExp(l),p=/^(.+?)(ss|i)es$/,v=/^(.+?)([^s])s$/,g=/^(.+?)eed$/,m=/^(.+?)(ed|ing)$/,y=/.$/,S=/(at|bl|iz)$/,x=new RegExp("([^aeiouylsz])\\1$"),w=new RegExp("^"+o+i+"[^aeiouwxy]$"),I=/^(.+?[^aeiou])y$/,b=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,E=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,D=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,F=/^(.+?)(s|t)(ion)$/,_=/^(.+?)e$/,P=/ll$/,k=new RegExp("^"+o+i+"[^aeiouwxy]$"),z=function(n){var i,o,r,s,u,a,l;if(n.length<3)return n;if(r=n.substr(0,1),"y"==r&&(n=r.toUpperCase()+n.substr(1)),s=p,u=v,s.test(n)?n=n.replace(s,"$1$2"):u.test(n)&&(n=n.replace(u,"$1$2")),s=g,u=m,s.test(n)){var z=s.exec(n);s=c,s.test(z[1])&&(s=y,n=n.replace(s,""))}else if(u.test(n)){var z=u.exec(n);i=z[1],u=h,u.test(i)&&(n=i,u=S,a=x,l=w,u.test(n)?n+="e":a.test(n)?(s=y,n=n.replace(s,"")):l.test(n)&&(n+="e"))}if(s=I,s.test(n)){var z=s.exec(n);i=z[1],n=i+"i"}if(s=b,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+e[o])}if(s=E,s.test(n)){var z=s.exec(n);i=z[1],o=z[2],s=c,s.test(i)&&(n=i+t[o])}if(s=D,u=F,s.test(n)){var z=s.exec(n);i=z[1],s=d,s.test(i)&&(n=i)}else if(u.test(n)){var z=u.exec(n);i=z[1]+z[2],u=d,u.test(i)&&(n=i)}if(s=_,s.test(n)){var z=s.exec(n);i=z[1],s=d,u=f,a=k,(s.test(i)||u.test(i)&&!a.test(i))&&(n=i)}return s=P,u=d,s.test(n)&&u.test(n)&&(s=y,n=n.replace(s,"")),"y"==r&&(n=r.toLowerCase()+n.substr(1)),n};return z}(),t.Pipeline.registerFunction(t.stemmer,"stemmer"),t.stopWordFilter=function(e){return e&&t.stopWordFilter.stopWords[e]!==!0?e:void 0},t.clearStopWords=function(){t.stopWordFilter.stopWords={}},t.addStopWords=function(e){null!=e&&Array.isArray(e)!==!1&&e.forEach(function(e){t.stopWordFilter.stopWords[e]=!0},this)},t.resetStopWords=function(){t.stopWordFilter.stopWords=t.defaultStopWords},t.defaultStopWords={"":!0,a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,"do":!0,does:!0,either:!0,"else":!0,ever:!0,every:!0,"for":!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,"if":!0,"in":!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,"this":!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,"while":!0,who:!0,whom:!0,why:!0,will:!0,"with":!0,would:!0,yet:!0,you:!0,your:!0},t.stopWordFilter.stopWords=t.defaultStopWords,t.Pipeline.registerFunction(t.stopWordFilter,"stopWordFilter"),t.trimmer=function(e){if(null===e||void 0===e)throw new Error("token should not be undefined");return e.replace(/^\W+/,"").replace(/\W+$/,"")},t.Pipeline.registerFunction(t.trimmer,"trimmer"),t.InvertedIndex=function(){this.root={docs:{},df:0}},t.InvertedIndex.load=function(e){var t=new this;return t.root=e.root,t},t.InvertedIndex.prototype.addToken=function(e,t,n){for(var n=n||this.root,i=0;i<=e.length-1;){var o=e[i];o in n||(n[o]={docs:{},df:0}),i+=1,n=n[o]}var r=t.ref;n.docs[r]?n.docs[r]={tf:t.tf}:(n.docs[r]={tf:t.tf},n.df+=1)},t.InvertedIndex.prototype.hasToken=function(e){if(!e)return!1;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return!1;t=t[e[n]]}return!0},t.InvertedIndex.prototype.getNode=function(e){if(!e)return null;for(var t=this.root,n=0;n<e.length;n++){if(!t[e[n]])return null;t=t[e[n]]}return t},t.InvertedIndex.prototype.getDocs=function(e){var t=this.getNode(e);return null==t?{}:t.docs},t.InvertedIndex.prototype.getTermFrequency=function(e,t){var n=this.getNode(e);return null==n?0:t in n.docs?n.docs[t].tf:0},t.InvertedIndex.prototype.getDocFreq=function(e){var t=this.getNode(e);return null==t?0:t.df},t.InvertedIndex.prototype.removeToken=function(e,t){if(e){var n=this.getNode(e);null!=n&&t in n.docs&&(delete n.docs[t],n.df-=1)}},t.InvertedIndex.prototype.expandToken=function(e,t,n){if(null==e||""==e)return[];var t=t||[];if(void 0==n&&(n=this.getNode(e),null==n))return t;n.df>0&&t.push(e);for(var i in n)"docs"!==i&&"df"!==i&&this.expandToken(e+i,t,n[i]);return t},t.InvertedIndex.prototype.toJSON=function(){return{root:this.root}},t.Configuration=function(e,n){var e=e||"";if(void 0==n||null==n)throw new Error("fields should not be null");this.config={};var i;try{i=JSON.parse(e),this.buildUserConfig(i,n)}catch(o){t.utils.warn("user configuration parse failed, will use default configuration"),this.buildDefaultConfig(n)}},t.Configuration.prototype.buildDefaultConfig=function(e){this.reset(),e.forEach(function(e){this.config[e]={boost:1,bool:"OR",expand:!1}},this)},t.Configuration.prototype.buildUserConfig=function(e,n){var i="OR",o=!1;if(this.reset(),"bool"in e&&(i=e.bool||i),"expand"in e&&(o=e.expand||o),"fields"in e)for(var r in e.fields)if(n.indexOf(r)>-1){var s=e.fields[r],u=o;void 0!=s.expand&&(u=s.expand),this.config[r]={boost:s.boost||0===s.boost?s.boost:1,bool:s.bool||i,expand:u}}else t.utils.warn("field name in user configuration not found in index instance fields");else this.addAllFields2UserConfig(i,o,n)},t.Configuration.prototype.addAllFields2UserConfig=function(e,t,n){n.forEach(function(n){this.config[n]={boost:1,bool:e,expand:t}},this)},t.Configuration.prototype.get=function(){return this.config},t.Configuration.prototype.reset=function(){this.config={}},lunr.SortedSet=function(){this.length=0,this.elements=[]},lunr.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},lunr.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],~this.indexOf(t)||this.elements.splice(this.locationFor(t),0,t);this.length=this.elements.length},lunr.SortedSet.prototype.toArray=function(){return this.elements.slice()},lunr.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},lunr.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},lunr.SortedSet.prototype.indexOf=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;){if(r===e)return o;e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o]}return r===e?o:-1},lunr.SortedSet.prototype.locationFor=function(e){for(var t=0,n=this.elements.length,i=n-t,o=t+Math.floor(i/2),r=this.elements[o];i>1;)e>r&&(t=o),r>e&&(n=o),i=n-t,o=t+Math.floor(i/2),r=this.elements[o];return r>e?o:e>r?o+1:void 0},lunr.SortedSet.prototype.intersect=function(e){for(var t=new lunr.SortedSet,n=0,i=0,o=this.length,r=e.length,s=this.elements,u=e.elements;;){if(n>o-1||i>r-1)break;s[n]!==u[i]?s[n]<u[i]?n++:s[n]>u[i]&&i++:(t.add(s[n]),n++,i++)}return t},lunr.SortedSet.prototype.clone=function(){var e=new lunr.SortedSet;return e.elements=this.toArray(),e.length=e.elements.length,e},lunr.SortedSet.prototype.union=function(e){var t,n,i;this.length>=e.length?(t=this,n=e):(t=e,n=this),i=t.clone();for(var o=0,r=n.toArray();o<r.length;o++)i.add(r[o]);return i},lunr.SortedSet.prototype.toJSON=function(){return this.toArray()},function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.elasticlunr=t()}(this,function(){return t})}();
    /** pdoc search index */const docs = [{"fullname": "main", "modulename": "main", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "main.DOMAIN", "modulename": "main", "qualname": "DOMAIN", "kind": "variable", "doc": "<p></p>\n", "default_value": "&#x27;localhost&#x27;"}, {"fullname": "main.PWD", "modulename": "main", "qualname": "PWD", "kind": "variable", "doc": "<p></p>\n", "default_value": "&#x27;12345&#x27;"}, {"fullname": "main.EMOJI_MAP", "modulename": "main", "qualname": "EMOJI_MAP", "kind": "variable", "doc": "<p></p>\n", "default_value": "{&#x27;machine&#x27;: &#x27;\ud83c\udfed&#x27;, &#x27;robot&#x27;: &#x27;\ud83e\udd16&#x27;, &#x27;supplier&#x27;: &#x27;\ud83d\udce6&#x27;, &#x27;maint&#x27;: &#x27;\ud83d\udd27&#x27;}"}, {"fullname": "main.COLUMNS", "modulename": "main", "qualname": "COLUMNS", "kind": "variable", "doc": "<p></p>\n", "default_value": "{&#x27;supplier&#x27;: 1.0, &#x27;robot&#x27;: 3.0, &#x27;machine&#x27;: 5.0, &#x27;maint&#x27;: 7.0}"}, {"fullname": "main.get_coords", "modulename": "main", "qualname": "get_coords", "kind": "function", "doc": "<p>Gera coordenadas (x, y) uniformemente distribu\u00eddas numa faixa horizontal.</p>\n\n<p>Esta fun\u00e7\u00e3o n\u00e3o est\u00e1 atualmente a ser usada no layout principal, mas\nrepresenta uma forma gen\u00e9rica de distribuir agentes na horizontal.</p>\n\n<p>Args:\n    count (int): N\u00famero de pontos a gerar.\n    y_pos (float): Coordenada Y fixa para todos os pontos.\n    x_min (float): Limite m\u00ednimo de X.\n    x_max (float): Limite m\u00e1ximo de X.</p>\n\n<p>Returns:\n    list[tuple[float, float]]: Lista de pares (x, y) espa\u00e7ados\n    uniformemente entre <code>x_min</code> e <code>x_max</code>. Se <code>count == 0</code>, devolve lista\n    vazia.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">count</span>, </span><span class=\"param\"><span class=\"n\">y_pos</span>, </span><span class=\"param\"><span class=\"n\">x_min</span>, </span><span class=\"param\"><span class=\"n\">x_max</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "main.generate_agents_config", "modulename": "main", "qualname": "generate_agents_config", "kind": "function", "doc": "<p>Gera e configura os agentes da f\u00e1brica com base em contagens e layout.</p>\n\n<p>Esta fun\u00e7\u00e3o cria inst\u00e2ncias dos agentes:</p>\n\n<ul>\n<li>Robots (<code>RobotAgent</code>)</li>\n<li>Maintenance crews (<code>MaintenanceAgent</code>)</li>\n<li>Suppliers (<code>SupplierAgent</code>)</li>\n<li>Machines (<code>MachineAgent</code>)</li>\n</ul>\n\n<p>Cada tipo de agente \u00e9 posicionado numa coluna fixa (<code>COLUMNS</code>), com\nespa\u00e7amento vertical constante. As m\u00e1quinas recebem as listas de JIDs\ndos suppliers, maintenance crews e robots, para poderem usar CNPs.</p>\n\n<p>Args:\n    counts (dict[str, int]): N\u00famero de agentes por tipo, por exemplo:\n        <code>{\"machines\": 2, \"robots\": 2, \"maint\": 2, \"suppliers\": 2}</code>.\n    domain (str): Dom\u00ednio XMPP (por exemplo, <code>\"localhost\"</code>).\n    pwd (str): Password a utilizar para todos os agentes.\n    env (FactoryEnvironment): Ambiente partilhado da f\u00e1brica.</p>\n\n<p>Returns:\n    tuple[list[spade.agent.Agent], list[str]]:\n        - Lista com todos os agentes criados (m\u00e1quinas, robots,\n          suppliers, maintenance crews).\n        - Lista de JIDs das m\u00e1quinas, usada para instanciar o Supervisor.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">counts</span>, </span><span class=\"param\"><span class=\"n\">domain</span>, </span><span class=\"param\"><span class=\"n\">pwd</span>, </span><span class=\"param\"><span class=\"n\">env</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "main.draw_factory_state", "modulename": "main", "qualname": "draw_factory_state", "kind": "function", "doc": "<p>Desenha o estado atual da f\u00e1brica (layout + m\u00e9tricas) com Matplotlib.</p>\n\n<p>A fun\u00e7\u00e3o produz duas vistas lado a lado:</p>\n\n<ul>\n<li><code>ax_map</code>: Mapa da f\u00e1brica com os agentes representados por emojis e\ncaixas coloridas (verdes, vermelhas, etc.).</li>\n<li><code>ax_metrics</code>: Tabelas com m\u00e9tricas principais e uma legenda visual.</li>\n</ul>\n\n<p>L\u00f3gica de visualiza\u00e7\u00e3o:</p>\n\n<ul>\n<li>M\u00e1quinas:\n<ul>\n<li>Caixa vermelha se falhada.</li>\n<li>Caixa amarela se com job em execu\u00e7\u00e3o.</li>\n<li>Caixa cinzenta se idle.</li>\n</ul></li>\n<li>Robots:\n<ul>\n<li>Caixa amarela se <code>is_busy</code> = True.</li>\n<li>Caixa cinzenta caso contr\u00e1rio.</li>\n</ul></li>\n<li>Maintenance crews:\n<ul>\n<li>Caixa amarela se em estado <code>\"busy\"</code> (a reparar).</li>\n<li>Caixa cinzenta se <code>\"available\"</code>.</li>\n<li>Quando ocupada, a crew \u00e9 desenhada junto da m\u00e1quina alvo.</li>\n</ul></li>\n<li>Suppliers:\n<ul>\n<li>Caixa vermelha se em <code>recharging</code> (sem stock).</li>\n<li>Caixa cinzenta caso contr\u00e1rio.</li>\n</ul></li>\n</ul>\n\n<p>Args:\n    env_data (dict): Snapshot do ambiente, tipicamente resultado de\n        <code>env.get_all_agents_status()</code>.\n    ax_map (matplotlib.axes.Axes): Eixo onde \u00e9 desenhado o mapa da f\u00e1brica.\n    ax_metrics (matplotlib.axes.Axes): Eixo onde s\u00e3o desenhadas as m\u00e9tricas\n        e a legenda.\n    current_counts (dict[str, int]): Contagens atuais de agentes por tipo,\n        usadas para ajustar dinamicamente os limites do gr\u00e1fico.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">env_data</span>, </span><span class=\"param\"><span class=\"n\">ax_map</span>, </span><span class=\"param\"><span class=\"n\">ax_metrics</span>, </span><span class=\"param\"><span class=\"n\">current_counts</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "main.main", "modulename": "main", "qualname": "main", "kind": "function", "doc": "<p>Fun\u00e7\u00e3o principal da simula\u00e7\u00e3o SPADE com dashboard Matplotlib.</p>\n\n<p>Passos principais:</p>\n\n<ol>\n<li>Cria o <code>FactoryEnvironment</code>.</li>\n<li>Pede ao utilizador os n\u00fameros de m\u00e1quinas, robots, crews de manuten\u00e7\u00e3o\ne suppliers (com valores m\u00ednimos de 1).</li>\n<li>Gera os agentes com <code>generate_agents_config()</code>.</li>\n<li>Arranca todos os agentes SPADE (m\u00e1quinas, robots, suppliers, manuten\u00e7\u00e3o).</li>\n<li>Arranca o Supervisor (<code>SupervisorAgent</code>) configurado com os JIDs\ndas m\u00e1quinas e o intervalo entre jobs.</li>\n<li>Inicializa a figura Matplotlib em modo interativo.</li>\n<li>Executa um loop at\u00e9 <code>MAX_TICKS</code>:\n<ul>\n<li>Obt\u00e9m o estado atual do ambiente via\n<code>FactoryEnvironment.get_all_agents_status()</code>.</li>\n<li>Desenha o estado com <code>draw_factory_state()</code>.</li>\n<li>Avan\u00e7a o tempo global com <code>FactoryEnvironment.tick()</code>.</li>\n</ul></li>\n<li>Em caso de erro, imprime a exce\u00e7\u00e3o.</li>\n<li>No final, fecha a figura, p\u00e1ra todos os agentes e imprime as m\u00e9tricas\nfinais do ambiente.</li>\n</ol>\n\n<p>Esta fun\u00e7\u00e3o \u00e9 passada a <code>spade.run(main())</code> para arrancar a simula\u00e7\u00e3o.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "environment", "modulename": "environment", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "environment.FactoryEnvironment", "modulename": "environment", "qualname": "FactoryEnvironment", "kind": "class", "doc": "<p>Ambiente partilhado da f\u00e1brica.</p>\n\n<p>Esta classe representa o contexto global da simula\u00e7\u00e3o:</p>\n\n<ul>\n<li><code>time</code>: contador discreto de ticks de simula\u00e7\u00e3o.</li>\n<li><code>metrics</code>: dicion\u00e1rio com contadores globais de desempenho.</li>\n<li><code>agents</code>: lista de inst\u00e2ncias dos agentes registados no ambiente.</li>\n</ul>\n\n<p>As m\u00e9tricas atualmente consideradas s\u00e3o:</p>\n\n<ul>\n<li>Jobs / produ\u00e7\u00e3o:\n<ul>\n<li><code>jobs_created</code>: n\u00famero total de jobs criados pelo supervisor.</li>\n<li><code>jobs_completed</code>: n\u00famero de jobs conclu\u00eddos com sucesso.</li>\n<li><code>jobs_lost</code>: jobs cancelados ou perdidos.</li>\n</ul></li>\n<li>Supply:\n<ul>\n<li><code>supply_requests_ok</code>: pedidos de materiais conclu\u00eddos com sucesso.</li>\n<li><code>supply_requests_failed</code>: pedidos de materiais que falharam/expiraram.</li>\n</ul></li>\n<li>Falhas e manuten\u00e7\u00e3o:\n<ul>\n<li><code>machine_failures</code>: n\u00famero total de falhas de m\u00e1quinas.</li>\n<li><code>repairs_started</code>: n\u00famero de repara\u00e7\u00f5es iniciadas.</li>\n<li><code>repairs_finished</code>: n\u00famero de repara\u00e7\u00f5es conclu\u00eddas.</li>\n<li><code>downtime_ticks</code>: total de ticks em que m\u00e1quinas estiveram falhadas.</li>\n</ul></li>\n<li>Transfer\u00eancia de jobs:\n<ul>\n<li><code>jobs_transferred</code>: n\u00famero de jobs transferidos entre m\u00e1quinas\ncom aux\u00edlio de robots.</li>\n</ul></li>\n</ul>\n"}, {"fullname": "environment.FactoryEnvironment.__init__", "modulename": "environment", "qualname": "FactoryEnvironment.__init__", "kind": "function", "doc": "<p>Inicializa o ambiente com tempo zero e m\u00e9tricas a 0.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">()</span>"}, {"fullname": "environment.FactoryEnvironment.time", "modulename": "environment", "qualname": "FactoryEnvironment.time", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "environment.FactoryEnvironment.metrics", "modulename": "environment", "qualname": "FactoryEnvironment.metrics", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "environment.FactoryEnvironment.agents", "modulename": "environment", "qualname": "FactoryEnvironment.agents", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "environment.FactoryEnvironment.register_agent", "modulename": "environment", "qualname": "FactoryEnvironment.register_agent", "kind": "function", "doc": "<p>Regista um agente no ambiente.</p>\n\n<p>Normalmente chamado a partir do m\u00e9todo <code>setup()</code> de cada agente\n(via <code>FactoryAgent</code>), de forma a que o ambiente possa:</p>\n\n<ul>\n<li>Descobrir todos os agentes existentes.</li>\n<li>Agregar estado (por exemplo, m\u00e1quinas dispon\u00edveis).</li>\n<li>Produzir um snapshot global para monitoriza\u00e7\u00e3o.</li>\n</ul>\n\n<p>Args:\n    agent: Inst\u00e2ncia de um agente SPADE a registar neste ambiente.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">agent</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "environment.FactoryEnvironment.get_all_agents_status", "modulename": "environment", "qualname": "FactoryEnvironment.get_all_agents_status", "kind": "function", "doc": "<p>Recolhe o estado atual de todos os agentes registados.</p>\n\n<p>Produz uma estrutura de dados pronta a ser serializada em JSON,\ncom a seguinte forma geral:</p>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"nt\">&quot;metrics&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"err\">...</span><span class=\"w\"> </span><span class=\"p\">},</span>\n<span class=\"w\">  </span><span class=\"nt\">&quot;time&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"err\">&lt;i</span><span class=\"kc\">nt</span><span class=\"err\">&gt;</span><span class=\"p\">,</span>\n<span class=\"w\">  </span><span class=\"nt\">&quot;agents&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"nt\">&quot;machines&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"> </span><span class=\"err\">...</span><span class=\"w\"> </span><span class=\"p\">],</span>\n<span class=\"w\">    </span><span class=\"nt\">&quot;robots&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"> </span><span class=\"err\">...</span><span class=\"w\"> </span><span class=\"p\">],</span>\n<span class=\"w\">    </span><span class=\"nt\">&quot;suppliers&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"> </span><span class=\"err\">...</span><span class=\"w\"> </span><span class=\"p\">],</span>\n<span class=\"w\">    </span><span class=\"nt\">&quot;maintenance_crews&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"> </span><span class=\"err\">...</span><span class=\"w\"> </span><span class=\"p\">],</span>\n<span class=\"w\">    </span><span class=\"nt\">&quot;supervisor&quot;</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"err\">...</span><span class=\"w\"> </span><span class=\"p\">}</span>\n<span class=\"w\">  </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre>\n</div>\n\n<p>Para cada tipo de agente, s\u00e3o recolhidos campos relevantes:</p>\n\n<ul>\n<li><strong>MachineAgent</strong>:\n<ul>\n<li>name, jid, position</li>\n<li>is_failed</li>\n<li>queue_size, max_queue</li>\n<li>current_job_id, current_step, ticks_remaining</li>\n</ul></li>\n<li><strong>RobotAgent</strong>:\n<ul>\n<li>name, jid, position</li>\n<li>energy, max_energy, is_busy</li>\n</ul></li>\n<li><strong>SupplierAgent</strong>:\n<ul>\n<li>name, jid, position</li>\n<li>stock, recharging</li>\n</ul></li>\n<li><strong>MaintenanceAgent</strong>:\n<ul>\n<li>name, jid, position</li>\n<li>status (available/busy)</li>\n<li>repair_target, ticks_remaining</li>\n</ul></li>\n<li><strong>SupervisorAgent</strong>:\n<ul>\n<li>jid</li>\n<li>last_job_id</li>\n</ul></li>\n</ul>\n\n<p>Returns:\n    dict: Estrutura de estado global da simula\u00e7\u00e3o, adequada para\n    serializa\u00e7\u00e3o com <code>json.dumps</code> ou para envio a um dashboard.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "environment.FactoryEnvironment.tick", "modulename": "environment", "qualname": "FactoryEnvironment.tick", "kind": "function", "doc": "<p>Avan\u00e7a o tempo global de simula\u00e7\u00e3o uma unidade.</p>\n\n<p>Este m\u00e9todo:</p>\n\n<ul>\n<li>Incrementa o contador <code>time</code> em 1 tick.</li>\n<li>Aguarda um pequeno intervalo (0.1 s) para simular o avan\u00e7o do\ntempo f\u00edsico/real na simula\u00e7\u00e3o.</li>\n</ul>\n\n<p>Pode ser chamado num loop principal do cen\u00e1rio, por exemplo:</p>\n\n<div class=\"pdoc-code codehilite\">\n<pre><span></span><code><span class=\"n\">env</span> <span class=\"o\">=</span> <span class=\"n\">FactoryEnvironment</span><span class=\"p\">()</span>\n<span class=\"k\">while</span> <span class=\"kc\">True</span><span class=\"p\">:</span>\n    <span class=\"k\">await</span> <span class=\"n\">env</span><span class=\"o\">.</span><span class=\"n\">tick</span><span class=\"p\">()</span>\n</code></pre>\n</div>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents", "modulename": "agents", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "agents.base_agent", "modulename": "agents.base_agent", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "agents.base_agent.FactoryAgent", "modulename": "agents.base_agent", "qualname": "FactoryAgent", "kind": "class", "doc": "<p>Agente base para todos os agentes da f\u00e1brica.</p>\n\n<p>Esta classe fornece funcionalidades comuns a todos os agentes do\nsistema, nomeadamente:</p>\n\n<p>Refer\u00eancia ao ambiente de simula\u00e7\u00e3o (<code>env</code>).\nRegisto autom\u00e1tico no ambiente durante o <code>setup</code>.\nM\u00e9todo de logging padronizado.\nA ideia \u00e9 que todos os outros agentes (m\u00e1quinas, supervisor, robots,\nmanuten\u00e7\u00e3o, etc.) herdem desta classe para manter um comportamento\ncomum.</p>\n", "bases": "spade.agent.Agent"}, {"fullname": "agents.base_agent.FactoryAgent.__init__", "modulename": "agents.base_agent", "qualname": "FactoryAgent.__init__", "kind": "function", "doc": "<p>Inicializa um agente de f\u00e1brica gen\u00e9rico.</p>\n\n<p>Args:\n    jid (str): JID XMPP do agente.\n    password (str): Password associada ao JID.\n    env: Ambiente/simulador onde o agente ser\u00e1 registado. Se for\n        <code>None</code>, nenhuma integra\u00e7\u00e3o autom\u00e1tica com ambiente \u00e9 feita.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">jid</span>, </span><span class=\"param\"><span class=\"n\">password</span>, </span><span class=\"param\"><span class=\"n\">env</span><span class=\"o\">=</span><span class=\"kc\">None</span></span>)</span>"}, {"fullname": "agents.base_agent.FactoryAgent.env", "modulename": "agents.base_agent", "qualname": "FactoryAgent.env", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.base_agent.FactoryAgent.setup", "modulename": "agents.base_agent", "qualname": "FactoryAgent.setup", "kind": "function", "doc": "<p>Executa a configura\u00e7\u00e3o inicial do agente ap\u00f3s o arranque.</p>\n\n<p>Este m\u00e9todo \u00e9 chamado automaticamente pelo SPADE quando o agente\narranca. A implementa\u00e7\u00e3o:</p>\n\n<ol>\n<li>Regista o agente no ambiente, se <code>env</code> n\u00e3o for <code>None</code>.</li>\n<li>Escreve uma mensagem de log indicando que o agente foi iniciado.</li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.base_agent.FactoryAgent.log", "modulename": "agents.base_agent", "qualname": "FactoryAgent.log", "kind": "function", "doc": "<p>Escreve uma mensagem de log com timestamp e JID do agente.</p>\n\n<p>A mensagem \u00e9 impressa no stdout no formato:</p>\n\n<p><code>[HH:MM:SS][jid] mensagem</code></p>\n\n<p>Args:\n    msg (str): Texto a ser registado no log.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">msg</span><span class=\"p\">:</span> <span class=\"nb\">str</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent", "modulename": "agents.machine_agent", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent", "modulename": "agents.machine_agent", "qualname": "MachineAgent", "kind": "class", "doc": "<p>Agente de m\u00e1quina de produ\u00e7\u00e3o.</p>\n\n<p>Este m\u00f3dulo define o <code>MachineAgent</code>, respons\u00e1vel por:</p>\n\n<ul>\n<li>Negociar jobs com o Supervisor via protocolo <code>\"job-dispatch\"</code> (CNP).</li>\n<li>Obter materiais de suppliers via protocolo <code>\"supply-cnp\"</code> (CNP de recursos).</li>\n<li>Executar um pipeline de produ\u00e7\u00e3o em v\u00e1rios steps (step0\u2013step3).</li>\n<li>Simular falhas com certa probabilidade e pedir manuten\u00e7\u00e3o \u00e0s crews via\nprotocolo <code>\"maintenance-cnp\"</code>.</li>\n<li>Transferir jobs para outras m\u00e1quinas em caso de falha, usando:\n<ul>\n<li>CNP de transfer\u00eancia entre m\u00e1quinas (<code>\"transfer-cnp\"</code>);</li>\n<li>Robots de transporte via protocolo <code>\"transport-cnp\"</code> para levar\no job fisicamente at\u00e9 \u00e0 m\u00e1quina destino;</li>\n<li>Protocolo <code>\"job-transfer\"</code> do lado da m\u00e1quina destino para receber\no job entregue pelo robot.</li>\n</ul></li>\n</ul>\n\n<p>A m\u00e1quina trabalha com uma fila de jobs (<code>job_queue</code>) e um job atual\n(<code>current_job</code>) que percorre um pipeline de etapas com tempos fixos.</p>\n", "bases": "agents.base_agent.FactoryAgent"}, {"fullname": "agents.machine_agent.MachineAgent.__init__", "modulename": "agents.machine_agent", "qualname": "MachineAgent.__init__", "kind": "function", "doc": "<p>Inicializa o agente de m\u00e1quina.</p>\n\n<p>Args:\n    jid (str): JID XMPP do agente, por exemplo <code>\"machine1@localhost\"</code>.\n    password (str): Password associada ao JID.\n    env: Ambiente/simulador partilhado, usado para:\n        - Aceder ao tempo de simula\u00e7\u00e3o;\n        - Registar m\u00e9tricas (jobs, falhas, manuten\u00e7\u00e3o, etc.).\n    name (str): Nome l\u00f3gico da m\u00e1quina para efeitos de log.\n    position (tuple[float, float]): Posi\u00e7\u00e3o (x, y) da m\u00e1quina.\n    suppliers (list[str] | None): Lista de JIDs dos suppliers.\n    material_requirements (dict[str, int] | None): Materiais\n        necess\u00e1rios por job. Se <code>None</code>, assume\n        <code>{\"material_1\": 10, \"material_2\": 5}</code>.\n    max_queue (int): Capacidade m\u00e1xima da fila de jobs.\n    failure_rate (float): Probabilidade de falha por tick em etapas\n        de processamento (step1/2/3).\n    maintenance_crews (list[str] | None): JIDs das equipas de\n        manuten\u00e7\u00e3o dispon\u00edveis.\n    robots (list[str] | None): JIDs dos robots que podem transportar jobs.</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">jid</span>,</span><span class=\"param\">\t<span class=\"n\">password</span>,</span><span class=\"param\">\t<span class=\"n\">env</span><span class=\"o\">=</span><span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;Machine&#39;</span>,</span><span class=\"param\">\t<span class=\"n\">position</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span>,</span><span class=\"param\">\t<span class=\"n\">suppliers</span><span class=\"o\">=</span><span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">material_requirements</span><span class=\"o\">=</span><span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">max_queue</span><span class=\"o\">=</span><span class=\"mi\">15</span>,</span><span class=\"param\">\t<span class=\"n\">failure_rate</span><span class=\"o\">=</span><span class=\"mf\">0.1</span>,</span><span class=\"param\">\t<span class=\"n\">maintenance_crews</span><span class=\"o\">=</span><span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">robots</span><span class=\"o\">=</span><span class=\"kc\">None</span></span>)</span>"}, {"fullname": "agents.machine_agent.MachineAgent.agent_name", "modulename": "agents.machine_agent", "qualname": "MachineAgent.agent_name", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.position", "modulename": "agents.machine_agent", "qualname": "MachineAgent.position", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.job_queue", "modulename": "agents.machine_agent", "qualname": "MachineAgent.job_queue", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.current_job", "modulename": "agents.machine_agent", "qualname": "MachineAgent.current_job", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.current_job_ticks", "modulename": "agents.machine_agent", "qualname": "MachineAgent.current_job_ticks", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.max_queue", "modulename": "agents.machine_agent", "qualname": "MachineAgent.max_queue", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.suppliers", "modulename": "agents.machine_agent", "qualname": "MachineAgent.suppliers", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.material_requirements", "modulename": "agents.machine_agent", "qualname": "MachineAgent.material_requirements", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.pipeline_template", "modulename": "agents.machine_agent", "qualname": "MachineAgent.pipeline_template", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.step_durations", "modulename": "agents.machine_agent", "qualname": "MachineAgent.step_durations", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.failure_rate", "modulename": "agents.machine_agent", "qualname": "MachineAgent.failure_rate", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.is_failed", "modulename": "agents.machine_agent", "qualname": "MachineAgent.is_failed", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.maintenance_crews", "modulename": "agents.machine_agent", "qualname": "MachineAgent.maintenance_crews", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.robots", "modulename": "agents.machine_agent", "qualname": "MachineAgent.robots", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.maintenance_requested", "modulename": "agents.machine_agent", "qualname": "MachineAgent.maintenance_requested", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.repair_in_progress", "modulename": "agents.machine_agent", "qualname": "MachineAgent.repair_in_progress", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.job_transfer_done", "modulename": "agents.machine_agent", "qualname": "MachineAgent.job_transfer_done", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.is_machine", "modulename": "agents.machine_agent", "qualname": "MachineAgent.is_machine", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.machine_agent.MachineAgent.setup", "modulename": "agents.machine_agent", "qualname": "MachineAgent.setup", "kind": "function", "doc": "<p>Configura a m\u00e1quina ap\u00f3s o arranque.</p>\n\n<p>Este m\u00e9todo:</p>\n\n<ol>\n<li>Chama o <code>setup</code> base (<code>FactoryAgent</code>) para registo no ambiente.</li>\n<li>Regista em log a posi\u00e7\u00e3o, a capacidade da fila, os suppliers e o\npipeline.</li>\n<li>Adiciona v\u00e1rios comportamentos que implementam:\n<ul>\n<li>CNP com Supervisor (<code>JobDispatchParticipant</code>),</li>\n<li>Execu\u00e7\u00e3o de jobs (<code>JobExecutor</code>),</li>\n<li>Pedido de manuten\u00e7\u00e3o (<code>MaintenanceRequester</code>),</li>\n<li>Rece\u00e7\u00e3o de respostas de manuten\u00e7\u00e3o (<code>MaintenanceResponseHandler</code>),</li>\n<li>CNP de transfer\u00eancia (<code>JobTransferInitiator</code>, <code>JobTransferParticipant</code>),</li>\n<li>Rece\u00e7\u00e3o de jobs transferidos (<code>JobTransferReceiver</code>).</li>\n</ul></li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.handle_failure", "modulename": "agents.machine_agent", "qualname": "MachineAgent.handle_failure", "kind": "function", "doc": "<p>Marca a m\u00e1quina como falhada e regista a ocorr\u00eancia de falha.</p>\n\n<p>Ao ser chamada, esta fun\u00e7\u00e3o:</p>\n\n<ul>\n<li>Marca a m\u00e1quina como falhada (<code>is_failed = True</code>).</li>\n<li>Reinicia flags de manuten\u00e7\u00e3o e transfer\u00eancia de job.</li>\n<li>Incrementa a m\u00e9trica <code>env.metrics[\"machine_failures\"]</code>.</li>\n<li>Regista no log a etapa do pipeline onde ocorreu a falha.</li>\n</ul>\n\n<p>Args:\n    job (dict): Dicion\u00e1rio com o estado do job atual, incluindo\n        pipeline e \u00edndice da etapa atual.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">job</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.transfer_job_via_robots", "modulename": "agents.machine_agent", "qualname": "MachineAgent.transfer_job_via_robots", "kind": "function", "doc": "<p>Transfere um job para outra m\u00e1quina usando robots (transport-cnp).</p>\n\n<p>Este m\u00e9todo:</p>\n\n<ol>\n<li>Verifica se existem robots configurados.</li>\n<li>Obt\u00e9m a posi\u00e7\u00e3o da m\u00e1quina de destino a partir do ambiente (<code>env</code>).</li>\n<li>Constr\u00f3i um payload de transporte de job:\n<ul>\n<li><code>kind = \"job\"</code></li>\n<li>posi\u00e7\u00e3o de origem e destino,</li>\n<li>estado do job (pipeline, etapa atual, ticks restantes, etc.).</li>\n</ul></li>\n<li>Inicia um CNP de transporte com robots via protocolo\n<code>\"transport-cnp\"</code>:\n<ul>\n<li>Envia CFP para todos os robots.</li>\n<li>Recolhe PROPOSE/REFUSE.</li>\n<li>Seleciona o robot com menor custo.</li>\n<li>Envia REJECT para os restantes.</li>\n<li>Envia ACCEPT-PROPOSAL ao robot vencedor.</li>\n</ul></li>\n<li>Aguarda um INFORM de conclus\u00e3o de transporte. Se receber\n<code>status=\"delivered\"</code> e <code>kind=\"job\"</code>, considera a transfer\u00eancia\nbem sucedida.</li>\n</ol>\n\n<p>Args:\n    job (dict): Estado serializ\u00e1vel do job a transferir\n        (id, pipeline, current_step_idx, remaining_ticks, etc.).\n    dest_machine_jid (str): JID da m\u00e1quina de destino.\n    beh (spade.behaviour.CyclicBehaviour): Comportamento chamador,\n        usado para <code>send</code>/<code>receive</code> no contexto correto.</p>\n\n<p>Returns:\n    bool: <code>True</code> se a transfer\u00eancia foi confirmada por INFORM,\n    <code>False</code> caso contr\u00e1rio (incluindo timeouts ou aus\u00eancia de robots).</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">job</span>, </span><span class=\"param\"><span class=\"n\">dest_machine_jid</span>, </span><span class=\"param\"><span class=\"n\">beh</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.JobDispatchParticipant", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobDispatchParticipant", "kind": "class", "doc": "<p>Participante no CNP de jobs com o Supervisor (job-dispatch).</p>\n\n<p>Este comportamento trata das mensagens do protocolo <code>\"job-dispatch\"</code>:</p>\n\n<ul>\n<li>CFP:\n<ul>\n<li>Se a m\u00e1quina estiver falhada \u2192 REFUSE <code>\"failed\"</code>.</li>\n<li>Se a fila estiver cheia \u2192 REFUSE <code>\"queue_full\"</code>.</li>\n<li>Caso contr\u00e1rio, PROPOSE com custo = tamanho da fila.</li>\n</ul></li>\n<li>ACCEPT-PROPOSAL:\n<ul>\n<li>Cria um novo job com o pipeline padr\u00e3o e adiciona-o \u00e0 fila.</li>\n<li>Envia INFORM ao Supervisor a confirmar aceita\u00e7\u00e3o.</li>\n</ul></li>\n<li>REJECT-PROPOSAL:\n<ul>\n<li>Apenas regista em log.</li>\n</ul></li>\n</ul>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.machine_agent.MachineAgent.JobDispatchParticipant.run", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobDispatchParticipant.run", "kind": "function", "doc": "<p>Processa uma mensagem do CNP de dispatch por itera\u00e7\u00e3o.</p>\n\n<p>Em cada itera\u00e7\u00e3o:</p>\n\n<ol>\n<li>Tenta receber uma mensagem com timeout de 0.5 s.</li>\n<li>Se n\u00e3o for do protocolo <code>\"job-dispatch\"</code>, ignora.</li>\n<li>Consoante o <code>performative</code>:\n<ul>\n<li><code>\"cfp\"</code> \u2192 decide entre PROPOSE/REFUSE com base na fila\ne no estado de falha.</li>\n<li><code>\"accept-proposal\"</code> \u2192 enfileira novo job.</li>\n<li><code>\"reject-proposal\"</code> \u2192 apenas log.</li>\n</ul></li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.request_materials_via_cnp", "modulename": "agents.machine_agent", "qualname": "MachineAgent.request_materials_via_cnp", "kind": "function", "doc": "<p>Lan\u00e7a um CNP <code>\"supply-cnp\"</code> aos suppliers para obter materiais.</p>\n\n<p>Este m\u00e9todo:</p>\n\n<ol>\n<li>Verifica se existem suppliers configurados.</li>\n<li>Envia uma CFP para todos os suppliers com:\n<ul>\n<li>materiais necess\u00e1rios (<code>material_requirements</code>);</li>\n<li>posi\u00e7\u00e3o da m\u00e1quina.</li>\n</ul></li>\n<li>Recolhe PROPOSE/REFUSE dos suppliers:\n<ul>\n<li>Seleciona o supplier com menor custo.</li>\n<li>Envia REJECT aos restantes.</li>\n<li>Envia ACCEPT-PROPOSAL ao vencedor.</li>\n</ul></li>\n<li>Aguarda INFORM final:\n<ul>\n<li>Se receber <code>status=\"delivered\"</code>:\n<ul>\n<li>marca <code>job[\"materials_ok\"] = True</code>;</li>\n<li>atualiza m\u00e9tricas de sucesso.</li>\n</ul></li>\n<li>Em caso de timeout:\n<ul>\n<li>atualiza m\u00e9tricas de falha.</li>\n</ul></li>\n</ul></li>\n</ol>\n\n<p>Args:\n    beh (spade.behaviour.CyclicBehaviour): Comportamento chamador,\n        usado para <code>send</code>/<code>receive</code> durante o CNP.\n    job (dict): Dicion\u00e1rio de estado do job para o qual os materiais\n        s\u00e3o pedidos.</p>\n\n<p>Returns:\n    bool: <code>True</code> se os materiais foram entregues com sucesso,\n    <code>False</code> caso contr\u00e1rio.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span>, </span><span class=\"param\"><span class=\"n\">beh</span>, </span><span class=\"param\"><span class=\"n\">job</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.JobExecutor", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobExecutor", "kind": "class", "doc": "<p>Executa o pipeline de jobs na m\u00e1quina e trata de falhas.</p>\n\n<p>Responsabilidades:</p>\n\n<ul>\n<li>Selecionar jobs da fila quando n\u00e3o h\u00e1 <code>current_job</code>.</li>\n<li>Iniciar ou retomar a execu\u00e7\u00e3o do job na etapa correta.</li>\n<li>Em <code>step0</code>:\n<ul>\n<li>Se n\u00e3o tiver <code>materials_ok</code>, pedir materiais via CNP aos suppliers.</li>\n<li>Em caso de falha de supply, marcar job como perdido.</li>\n</ul></li>\n<li>Em <code>step1</code>, <code>step2</code>, <code>step3</code>:\n<ul>\n<li>A cada tick, decrementar <code>current_job_ticks</code>.</li>\n<li>Com probabilidade <code>failure_rate</code>, provocar falha da m\u00e1quina.</li>\n<li>Quando os ticks da etapa acabam, avan\u00e7ar para a etapa seguinte\nou concluir o job (atualizando m\u00e9tricas).</li>\n</ul></li>\n</ul>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.machine_agent.MachineAgent.JobExecutor.run", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobExecutor.run", "kind": "function", "doc": "<p>Executa um ciclo de processamento do job.</p>\n\n<p>Em cada itera\u00e7\u00e3o:</p>\n\n<ol>\n<li>Se a m\u00e1quina estiver falhada:\n<ul>\n<li>Incrementa a m\u00e9trica de <code>downtime_ticks</code>.</li>\n<li>Aguard</li>\n</ul></li>\n<li>Se n\u00e3o existir <code>current_job</code> mas houver jobs na fila:\n<ul>\n<li>Extrai o pr\u00f3ximo job.</li>\n<li>Garante que tem <code>pipeline</code>, <code>current_step_idx</code> e <code>materials_ok</code>.</li>\n<li>Define <code>current_job_ticks</code> (podendo vir de <code>remaining_ticks</code>\nem caso de transfer\u00eancia).</li>\n</ul></li>\n<li>Se o <code>current_step</code> for <code>\"step0\"</code>:\n<ul>\n<li>Se n\u00e3o tiver materiais, chama\n<code>MachineAgent.request_materials_via_cnp()</code>.</li>\n<li>Em caso de sucesso, avan\u00e7a imediatamente para <code>step1</code>\nou termina o job se s\u00f3 houver step0.</li>\n</ul></li>\n<li>Para steps posteriores:\n<ul>\n<li>Pode ocorrer falha com probabilidade <code>failure_rate</code>.</li>\n<li>Decrementa <code>current_job_ticks</code> e regista progresso.</li>\n<li>Ao terminar a etapa, avan\u00e7a no pipeline ou marca job conclu\u00eddo.</li>\n</ul></li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.MaintenanceRequester", "modulename": "agents.machine_agent", "qualname": "MachineAgent.MaintenanceRequester", "kind": "class", "doc": "<p>Inicia CNP de manuten\u00e7\u00e3o com as equipas de manuten\u00e7\u00e3o.</p>\n\n<p>Este comportamento:</p>\n\n<ul>\n<li>S\u00f3 atua quando a m\u00e1quina est\u00e1 falhada (<code>is_failed</code>) e ainda n\u00e3o\nfoi feito pedido de manuten\u00e7\u00e3o (<code>maintenance_requested</code> = False).</li>\n<li>Envia CFP para todas as <code>maintenance_crews</code> com:\n<ul>\n<li>JID da m\u00e1quina;</li>\n<li>posi\u00e7\u00e3o da m\u00e1quina.</li>\n</ul></li>\n<li>Recolhe PROPOSE/REFUSE das crews.</li>\n<li>Escolhe a crew com menor custo e:\n<ul>\n<li>Envia REJECT \u00e0s outras;</li>\n<li>Envia ACCEPT-PROPOSAL \u00e0 vencedora com tempo de repara\u00e7\u00e3o.</li>\n</ul></li>\n<li>Atualiza flags (<code>repair_in_progress</code>) e m\u00e9tricas\n(<code>repairs_started</code>) no ambiente.</li>\n</ul>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.machine_agent.MachineAgent.MaintenanceRequester.run", "modulename": "agents.machine_agent", "qualname": "MachineAgent.MaintenanceRequester.run", "kind": "function", "doc": "<p>Executa um ciclo de pedido de manuten\u00e7\u00e3o.</p>\n\n<p>L\u00f3gica:</p>\n\n<ol>\n<li>Se a m\u00e1quina n\u00e3o estiver falhada ou j\u00e1 tiver pedido manuten\u00e7\u00e3o,\ndorme e sai.</li>\n<li>Caso contr\u00e1rio:\n<ul>\n<li>Verifica se existem crews configuradas.</li>\n<li>Envia CFP a todas as crews via protocolo <code>\"maintenance-cnp\"</code>.</li>\n<li>Recolhe respostas durante um tempo limite.</li>\n<li>Se n\u00e3o houver propostas:\n<ul>\n<li>Regista no log que n\u00e3o h\u00e1 crews dispon\u00edveis.</li>\n</ul></li>\n<li>Se houver:\n<ul>\n<li>Escolhe a proposta de menor custo.</li>\n<li>Envia REJECT \u00e0s restantes.</li>\n<li>Envia ACCEPT-PROPOSAL \u00e0 vencedora com dados da m\u00e1quina\ne <code>repair_time</code>.</li>\n<li>Marca que h\u00e1 repara\u00e7\u00e3o em progresso.</li>\n</ul></li>\n</ul></li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.MaintenanceResponseHandler", "modulename": "agents.machine_agent", "qualname": "MachineAgent.MaintenanceResponseHandler", "kind": "class", "doc": "<p>Trata respostas INFORM das equipas de manuten\u00e7\u00e3o.</p>\n\n<p>Este comportamento escuta o protocolo <code>\"maintenance-cnp\"</code> e:</p>\n\n<ul>\n<li>Quando recebe INFORM com <code>status=\"repair_started\"</code>:\n<ul>\n<li>Regista no log que a repara\u00e7\u00e3o come\u00e7ou.</li>\n</ul></li>\n<li>Quando recebe INFORM com <code>status=\"repair_completed\"</code>:\n<ul>\n<li>Marca a m\u00e1quina como operacional (<code>is_failed = False</code>).</li>\n<li>Limpa flags de repara\u00e7\u00e3o (<code>repair_in_progress</code>,\n<code>maintenance_requested</code>).</li>\n<li>Regista no log a conclus\u00e3o da repara\u00e7\u00e3o.</li>\n</ul></li>\n</ul>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.machine_agent.MachineAgent.MaintenanceResponseHandler.run", "modulename": "agents.machine_agent", "qualname": "MachineAgent.MaintenanceResponseHandler.run", "kind": "function", "doc": "<p>Processa uma mensagem de resposta de manuten\u00e7\u00e3o, se existir.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.JobTransferInitiator", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobTransferInitiator", "kind": "class", "doc": "<p>Inicia CNP de transfer\u00eancia de job para outras m\u00e1quinas.</p>\n\n<p>Este comportamento \u00e9 usado quando:</p>\n\n<ul>\n<li>A m\u00e1quina est\u00e1 falhada (<code>is_failed</code>).</li>\n<li>Existe um job atual (<code>current_job</code>).</li>\n<li>Ainda n\u00e3o foi feita/terminada uma tentativa de transfer\u00eancia\n(<code>job_transfer_done</code> = False).</li>\n</ul>\n\n<p>Passos:</p>\n\n<ol>\n<li>Descobre outras m\u00e1quinas registadas no ambiente (<code>env.agents</code>).</li>\n<li>Empacota o estado do job (pipeline, \u00edndice, materials_ok,\nremaining_ticks, etc.).</li>\n<li>Envia CFP a essas m\u00e1quinas usando protocolo <code>\"transfer-cnp\"</code>.</li>\n<li>Recolhe PROPOSE/REFUSE e escolhe a m\u00e1quina com menor custo\n(por ex., fila mais pequena).</li>\n<li>Envia REJECT aos restantes, ACCEPT-PROPOSAL ao vencedor.</li>\n<li>Chama <code>MachineAgent.transfer_job_via_robots()</code> para transportar\no job at\u00e9 \u00e0 m\u00e1quina destino via robots.</li>\n<li>Se a transfer\u00eancia for bem sucedida:\n<ul>\n<li>Liberta o job atual;</li>\n<li>Atualiza <code>job_transfer_done</code>.</li>\n</ul></li>\n</ol>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.machine_agent.MachineAgent.JobTransferInitiator.run", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobTransferInitiator.run", "kind": "function", "doc": "<p>Executa um ciclo de tentativa de transfer\u00eancia de job.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.JobTransferParticipant", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobTransferParticipant", "kind": "class", "doc": "<p>Participa no CNP de transfer\u00eancia de jobs como m\u00e1quina candidata.</p>\n\n<p>Lado da m\u00e1quina que pode receber jobs transferidos:</p>\n\n<ul>\n<li>CFP:\n<ul>\n<li>Se m\u00e1quina estiver falhada ou fila cheia, REFUSE.</li>\n<li>Caso contr\u00e1rio, PROPOSE com custo = tamanho da fila.</li>\n</ul></li>\n<li>ACCEPT-PROPOSAL:\n<ul>\n<li>Apenas regista que foi escolhida, aguardando entrega via robot.</li>\n</ul></li>\n<li>REJECT-PROPOSAL:\n<ul>\n<li>Apenas regista que n\u00e3o foi escolhida.</li>\n</ul></li>\n</ul>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.machine_agent.MachineAgent.JobTransferParticipant.run", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobTransferParticipant.run", "kind": "function", "doc": "<p>Processa mensagens do protocolo <code>\"transfer-cnp\"</code> por itera\u00e7\u00e3o.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.machine_agent.MachineAgent.JobTransferReceiver", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobTransferReceiver", "kind": "class", "doc": "<p>Recebe jobs entregues por robots via protocolo <code>\"job-transfer\"</code>.</p>\n\n<p>Este comportamento:</p>\n\n<ul>\n<li>Escuta mensagens com protocolo <code>\"job-transfer\"</code>.</li>\n<li>Se <code>status == \"job_delivered\"</code>:\n<ul>\n<li>Valida o dicion\u00e1rio de job.</li>\n<li>Adiciona o job \u00e0 <code>job_queue</code>.</li>\n<li>Regista no log o tamanho atualizado da fila.</li>\n</ul></li>\n</ul>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.machine_agent.MachineAgent.JobTransferReceiver.run", "modulename": "agents.machine_agent", "qualname": "MachineAgent.JobTransferReceiver.run", "kind": "function", "doc": "<p>Processa uma mensagem de entrega de job.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.maintenance_agent", "modulename": "agents.maintenance_agent", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent", "kind": "class", "doc": "<p>Agente de manuten\u00e7\u00e3o (Maintenance Crew).</p>\n\n<p>Este agente representa uma equipa de manuten\u00e7\u00e3o que responde a pedidos\nde repara\u00e7\u00e3o de m\u00e1quinas. Utiliza o protocolo <code>maintenance-cnp</code>:</p>\n\n<ul>\n<li>Recebe CFP com informa\u00e7\u00e3o da m\u00e1quina (JID e posi\u00e7\u00e3o).</li>\n<li>Se estiver dispon\u00edvel:\n<ul>\n<li>Calcula um custo com base na dist\u00e2ncia e no tempo de repara\u00e7\u00e3o.</li>\n<li>Responde com PROPOSE.</li>\n</ul></li>\n<li>Se for escolhida:\n<ul>\n<li>Recebe ACCEPT-PROPOSAL com <code>repair_time</code>.</li>\n<li>Simula a repara\u00e7\u00e3o durante um certo n\u00famero de ticks\n(<code>RepairExecutor</code>).</li>\n<li>Envia INFORM com <code>status=\"repair_completed\"</code> para a m\u00e1quina.</li>\n</ul></li>\n</ul>\n", "bases": "agents.base_agent.FactoryAgent"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.__init__", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.__init__", "kind": "function", "doc": "<p>Inicializa o agente de manuten\u00e7\u00e3o.</p>\n\n<p>Args:\n    jid (str): JID XMPP do agente.\n    password (str): Password associada ao JID.\n    env: Refer\u00eancia ao ambiente/simulador, usada para atualizar m\u00e9tricas,\n        como o n\u00famero de repara\u00e7\u00f5es conclu\u00eddas.\n    name (str): Nome da equipa de manuten\u00e7\u00e3o para efeitos de log.\n    position (tuple[float, float]): Posi\u00e7\u00e3o inicial (x, y) da equipa.\n    repair_time_range (tuple[int, int]): Intervalo (m\u00edn, m\u00e1x) em ticks\n        para a dura\u00e7\u00e3o de repara\u00e7\u00f5es.</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">jid</span>,</span><span class=\"param\">\t<span class=\"n\">password</span>,</span><span class=\"param\">\t<span class=\"n\">env</span><span class=\"o\">=</span><span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;MaintenanceCrew&#39;</span>,</span><span class=\"param\">\t<span class=\"n\">position</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span>,</span><span class=\"param\">\t<span class=\"n\">repair_time_range</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">8</span><span class=\"p\">)</span></span>)</span>"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.agent_name", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.agent_name", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.position", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.position", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.repair_time_range", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.repair_time_range", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.crew_status", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.crew_status", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.current_repair", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.current_repair", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.repair_ticks_remaining", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.repair_ticks_remaining", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.setup", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.setup", "kind": "function", "doc": "<p>Configura o agente ap\u00f3s o arranque.</p>\n\n<p>Este m\u00e9todo:</p>\n\n<ol>\n<li>Chama o setup base (<code>FactoryAgent</code>) para registo no ambiente.</li>\n<li>Escreve uma mensagem de log com a posi\u00e7\u00e3o e estado inicial da\nequipa de manuten\u00e7\u00e3o.</li>\n<li>Adiciona dois comportamentos c\u00edclicos:\n<ul>\n<li><code>MaintenanceParticipant</code> para participa\u00e7\u00e3o no CNP\nde manuten\u00e7\u00e3o;</li>\n<li><code>RepairExecutor</code> para simular a execu\u00e7\u00e3o da repara\u00e7\u00e3o\nao longo do tempo.</li>\n</ul></li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.MaintenanceParticipant", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.MaintenanceParticipant", "kind": "class", "doc": "<p>Comportamento CNP para responder a pedidos de manuten\u00e7\u00e3o.</p>\n\n<p>Este comportamento trata da parte de negocia\u00e7\u00e3o:</p>\n\n<ul>\n<li>Recebe mensagens com o protocolo <code>\"maintenance-cnp\"</code>.</li>\n<li>Para mensagens com performative <code>\"cfp\"</code>:\n<ul>\n<li>Se a equipa estiver dispon\u00edvel \u2192 calcula um custo e faz PROPOSE.</li>\n<li>Caso contr\u00e1rio \u2192 responde REFUSE, indicando o estado atual.</li>\n</ul></li>\n<li>Para mensagens com performative <code>\"accept-proposal\"</code>:\n<ul>\n<li>Regista a repara\u00e7\u00e3o atual e define o n\u00famero de ticks restantes.</li>\n<li>Atualiza o estado da equipa para <code>\"busy\"</code>.</li>\n<li>Opcionalmente envia um INFORM com <code>\"repair_started\"</code>.</li>\n</ul></li>\n<li>Para mensagens com performative <code>\"reject-proposal\"</code>:\n<ul>\n<li>Apenas regista a rejei\u00e7\u00e3o no log.</li>\n</ul></li>\n</ul>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.MaintenanceParticipant.run", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.MaintenanceParticipant.run", "kind": "function", "doc": "<p>Processa uma mensagem do protocolo de manuten\u00e7\u00e3o.</p>\n\n<p>Este m\u00e9todo \u00e9 chamado ciclicamente pelo motor de comportamentos\ndo SPADE. Em cada itera\u00e7\u00e3o:</p>\n\n<ol>\n<li>Tenta ler uma mensagem com timeout curto.</li>\n<li>Se n\u00e3o houver mensagem ou se n\u00e3o for do protocolo\n<code>\"maintenance-cnp\"</code>, termina a itera\u00e7\u00e3o.</li>\n<li>Com base no performative (<code>cfp</code>, <code>accept-proposal</code>,\n<code>reject-proposal</code>), executa a l\u00f3gica correspondente descrita\nem <code>MaintenanceParticipant</code>.</li>\n</ol>\n\n<p>Protocolo de mensagens:\n    - CFP:\n        * metadata:\n            - <code>protocol</code> = <code>\"maintenance-cnp\"</code>\n            - <code>performative</code> = <code>\"cfp\"</code>\n            - <code>thread</code> = ID do leil\u00e3o/negocia\u00e7\u00e3o\n        * body (JSON):\n            - <code>machine_jid</code> (str)\n            - <code>machine_pos</code> (list[float, float])\n    - PROPOSE:\n        * metadata:\n            - <code>protocol</code> = <code>\"maintenance-cnp\"</code>\n            - <code>performative</code> = <code>\"propose\"</code>\n            - <code>thread</code> = mesmo ID da CFP\n        * body (JSON):\n            - <code>crew</code> (str): nome da equipa.\n            - <code>cost</code> (float): custo estimado.\n            - <code>repair_time</code> (int): dura\u00e7\u00e3o estimada da repara\u00e7\u00e3o.\n            - <code>distance</code> (float): dist\u00e2ncia \u00e0 m\u00e1quina.\n    - REFUSE:\n        * metadata:\n            - <code>protocol</code> = <code>\"maintenance-cnp\"</code>\n            - <code>performative</code> = <code>\"refuse\"</code>\n            - <code>thread</code> = mesmo ID da CFP\n        * body (JSON, opcional):\n            - <code>reason</code> (str): motivo da recusa (por ex., <code>\"busy\"</code>).\n    - ACCEPT-PROPOSAL / REJECT-PROPOSAL:\n        * metadata:\n            - <code>protocol</code> = <code>\"maintenance-cnp\"</code>\n            - <code>performative</code> = <code>\"accept-proposal\"</code> ou\n              <code>\"reject-proposal\"</code>\n            - <code>thread</code> = mesmo ID da CFP\n        * body:\n            - No caso de <code>accept-proposal</code>: inclui informa\u00e7\u00e3o\n              da m\u00e1quina e <code>repair_time</code>.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.RepairExecutor", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.RepairExecutor", "kind": "class", "doc": "<p>Comportamento respons\u00e1vel por simular a execu\u00e7\u00e3o da repara\u00e7\u00e3o.</p>\n\n<p>Este comportamento:</p>\n\n<ul>\n<li>Verifica se existe uma repara\u00e7\u00e3o em curso (<code>current_repair</code>).</li>\n<li>Se n\u00e3o houver, marca a equipa como <code>\"available\"</code> e fica em espera.</li>\n<li>Se houver, decrementa <code>repair_ticks_remaining</code> a cada execu\u00e7\u00e3o,\nsimulando a passagem de um tick de repara\u00e7\u00e3o.</li>\n<li>Quando o n\u00famero de ticks chegar a zero:\n<ul>\n<li>Envia uma mensagem INFORM com <code>\"repair_completed\"</code> para a\nm\u00e1quina correspondente.</li>\n<li>Atualiza o estado da equipa para <code>\"available\"</code>.</li>\n<li>Incrementa a m\u00e9trica global <code>repairs_finished</code> no ambiente.</li>\n</ul></li>\n</ul>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.maintenance_agent.MaintenanceAgent.RepairExecutor.run", "modulename": "agents.maintenance_agent", "qualname": "MaintenanceAgent.RepairExecutor.run", "kind": "function", "doc": "<p>Atualiza o estado da repara\u00e7\u00e3o em curso.</p>\n\n<p>Este m\u00e9todo \u00e9 chamado ciclicamente, representando o avan\u00e7o de\num tick de simula\u00e7\u00e3o para a repara\u00e7\u00e3o:</p>\n\n<ul>\n<li>Se <code>current_repair</code> for <code>None</code>:\n<ul>\n<li>Marca a equipa como dispon\u00edvel.</li>\n<li>Aguarda um curto intervalo antes da pr\u00f3xima itera\u00e7\u00e3o.</li>\n</ul></li>\n<li>Se <code>current_repair</code> n\u00e3o for <code>None</code>:\n<ul>\n<li>Decrementa <code>repair_ticks_remaining</code>.</li>\n<li>Regista no log o n\u00famero de ticks restantes.</li>\n<li>Quando <code>repair_ticks_remaining</code> chega a 0 ou menos:\n<ul>\n<li>Envia INFORM para a m\u00e1quina com\n<code>status=\"repair_completed\"</code>.</li>\n<li>Limpa <code>current_repair</code> e volta a marcar a equipa como\ndispon\u00edvel.</li>\n<li>Atualiza a m\u00e9trica <code>repairs_finished</code> no ambiente, se\neste existir.</li>\n</ul></li>\n</ul></li>\n</ul>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.maintenance_agent.random_int_in_range", "modulename": "agents.maintenance_agent", "qualname": "random_int_in_range", "kind": "function", "doc": "<p>Gera um inteiro aleat\u00f3rio dentro de um intervalo.</p>\n\n<p>Fun\u00e7\u00e3o auxiliar simples que devolve um n\u00famero inteiro aleat\u00f3rio dentro\ndo intervalo dado por <code>rng</code>, usando <code>random.randint</code>.</p>\n\n<p>Args:\n    rng (tuple[int, int]): Intervalo (m\u00edn, m\u00e1x) no qual gerar o n\u00famero\n        inteiro aleat\u00f3rio.</p>\n\n<p>Returns:\n    int: N\u00famero inteiro aleat\u00f3rio no intervalo <code>[rng[0], rng[1]]</code>.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">rng</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "agents.robot_agent", "modulename": "agents.robot_agent", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.euclidean_distance", "modulename": "agents.robot_agent", "qualname": "euclidean_distance", "kind": "function", "doc": "<p>Calcula a dist\u00e2ncia euclidiana entre dois pontos 2D.</p>\n\n<p>Args:\n    p1 (Sequence[float]): Ponto inicial, como tuplo ou lista <code>(x1, y1)</code>.\n    p2 (Sequence[float]): Ponto final, como tuplo ou lista <code>(x2, y2)</code>.</p>\n\n<p>Returns:\n    float: Dist\u00e2ncia euclidiana entre <code>p1</code> e <code>p2</code>.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">p1</span>, </span><span class=\"param\"><span class=\"n\">p2</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "def"}, {"fullname": "agents.robot_agent.RobotAgent", "modulename": "agents.robot_agent", "qualname": "RobotAgent", "kind": "class", "doc": "<p>Robot de transporte com gest\u00e3o de energia, respons\u00e1vel por transportar:</p>\n\n<pre><code>- Materiais (dos suppliers para as m\u00e1quinas).\n- Jobs (entre m\u00e1quinas).\n\nO robot participa no protocolo ``\"transport-cnp\"``:\n\nA coordena\u00e7\u00e3o \u00e9 feita via um protocolo CNP \u00fanico, ``\"transport-cnp\"``,\n</code></pre>\n\n<p>em que o robot:</p>\n\n<pre><code>1. Recebe CFP com a descri\u00e7\u00e3o do transporte (tipo, origem, destino, etc.).\n2. Se tiver energia suficiente e estiver livre, responde com PROPOSE,\nindicando custo, dist\u00e2ncia e energia necess\u00e1ria.\n3. Caso contr\u00e1rio, responde com REFUSE (por exemplo, ``\"busy\"``\nou ``\"low_energy\"``).\n4. Quando recebe ACCEPT-PROPOSAL, executa o transporte:\n- Atualiza energia.\n- Simula tempo de viagem.\n- Atualiza a sua posi\u00e7\u00e3o.\n- Envia INFORM com ``status=\"delivered\"`` ao iniciador.\n5. Para jobs, pode ainda notificar a m\u00e1quina de destino com o pr\u00f3prio job\nvia protocolo ``\"job-transfer\"``.\n\nInclui ainda um modelo simples de energia com recarga autom\u00e1tica\nquando o robot est\u00e1 ocioso.\n</code></pre>\n", "bases": "agents.base_agent.FactoryAgent"}, {"fullname": "agents.robot_agent.RobotAgent.__init__", "modulename": "agents.robot_agent", "qualname": "RobotAgent.__init__", "kind": "function", "doc": "<p>Inicializa o agente robot de transporte.</p>\n\n<p>Args:\n    jid (str): JID XMPP do agente.\n    password (str): Password associada ao JID.\n    env: Ambiente/simulador partilhado, caso exista.\n    name (str): Nome l\u00f3gico do robot para efeitos de log.\n    position (tuple[float, float]): Posi\u00e7\u00e3o inicial do robot.\n    speed (float): Fator utilizado para determinar o tempo de viagem\n        a partir da dist\u00e2ncia total (<code>travel_time = dist * speed</code>).\n    max_energy (int): Energia m\u00e1xima do robot.\n    recharge_rate (int): Percentagem de energia recarregada por tick\n        quando o robot est\u00e1 ocioso.\n    energy_per_unit (float): Energia consumida por unidade de dist\u00e2ncia.\n    low_energy_threshold (int): Limiar abaixo do qual o robot tende\n        a recusar novos transportes (por seguran\u00e7a).</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">jid</span>,</span><span class=\"param\">\t<span class=\"n\">password</span>,</span><span class=\"param\">\t<span class=\"n\">env</span><span class=\"o\">=</span><span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;Robot&#39;</span>,</span><span class=\"param\">\t<span class=\"n\">position</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span>,</span><span class=\"param\">\t<span class=\"n\">speed</span><span class=\"o\">=</span><span class=\"mf\">1.0</span>,</span><span class=\"param\">\t<span class=\"n\">max_energy</span><span class=\"o\">=</span><span class=\"mi\">100</span>,</span><span class=\"param\">\t<span class=\"n\">recharge_rate</span><span class=\"o\">=</span><span class=\"mi\">5</span>,</span><span class=\"param\">\t<span class=\"n\">energy_per_unit</span><span class=\"o\">=</span><span class=\"mf\">1.0</span>,</span><span class=\"param\">\t<span class=\"n\">low_energy_threshold</span><span class=\"o\">=</span><span class=\"mi\">5</span></span>)</span>"}, {"fullname": "agents.robot_agent.RobotAgent.agent_name", "modulename": "agents.robot_agent", "qualname": "RobotAgent.agent_name", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.RobotAgent.position", "modulename": "agents.robot_agent", "qualname": "RobotAgent.position", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.RobotAgent.speed", "modulename": "agents.robot_agent", "qualname": "RobotAgent.speed", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.RobotAgent.max_energy", "modulename": "agents.robot_agent", "qualname": "RobotAgent.max_energy", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.RobotAgent.energy", "modulename": "agents.robot_agent", "qualname": "RobotAgent.energy", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.RobotAgent.recharge_rate", "modulename": "agents.robot_agent", "qualname": "RobotAgent.recharge_rate", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.RobotAgent.energy_per_unit", "modulename": "agents.robot_agent", "qualname": "RobotAgent.energy_per_unit", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.RobotAgent.low_energy_threshold", "modulename": "agents.robot_agent", "qualname": "RobotAgent.low_energy_threshold", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.RobotAgent.busy", "modulename": "agents.robot_agent", "qualname": "RobotAgent.busy", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.robot_agent.RobotAgent.setup", "modulename": "agents.robot_agent", "qualname": "RobotAgent.setup", "kind": "function", "doc": "<p>Configura o robot ap\u00f3s o arranque.</p>\n\n<p>Este m\u00e9todo:</p>\n\n<ol>\n<li>Chama o <code>setup</code> base (<code>FactoryAgent</code>).</li>\n<li>Regista no log a posi\u00e7\u00e3o inicial e a energia atual.</li>\n<li>Adiciona o comportamento <code>TransportManagerBehaviour</code>,\nrespons\u00e1vel pela recarga de energia, negocia\u00e7\u00e3o CNP e execu\u00e7\u00e3o\ndos transportes.</li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.robot_agent.RobotAgent.TransportManagerBehaviour", "modulename": "agents.robot_agent", "qualname": "RobotAgent.TransportManagerBehaviour", "kind": "class", "doc": "<p>Comportamento principal do robot para gest\u00e3o de transportes.</p>\n\n<p>Responsabilidades:</p>\n\n<ul>\n<li>Receber mensagens do protocolo <code>\"transport-cnp\"</code>.</li>\n<li>Para CFP:\n<ul>\n<li>Verificar se o robot est\u00e1 livre e se tem energia suficiente.</li>\n<li>Calcular dist\u00e2ncia e energia necess\u00e1ria.</li>\n<li>Responder com PROPOSE ou REFUSE.</li>\n</ul></li>\n<li>Para ACCEPT-PROPOSAL:\n<ul>\n<li>Executar o transporte (simula\u00e7\u00e3o de viagem).</li>\n<li>Atualizar energia e posi\u00e7\u00e3o.</li>\n<li>Enviar INFORM com <code>status=\"delivered\"</code>.</li>\n<li>No caso de jobs, notificar tamb\u00e9m a m\u00e1quina de destino\nvia protocolo <code>\"job-transfer\"</code>.</li>\n</ul></li>\n<li>Para REJECT-PROPOSAL:\n<ul>\n<li>Apenas regista a rejei\u00e7\u00e3o no log.</li>\n</ul></li>\n</ul>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.robot_agent.RobotAgent.TransportManagerBehaviour.run", "modulename": "agents.robot_agent", "qualname": "RobotAgent.TransportManagerBehaviour.run", "kind": "function", "doc": "<p>Executa um ciclo de gest\u00e3o de energia e processamento de mensagens.</p>\n\n<p>Em cada itera\u00e7\u00e3o:</p>\n\n<ol>\n<li>Tenta receber uma mensagem com pequeno timeout.</li>\n<li>Se a mensagem pertencer ao protocolo <code>\"transport-cnp\"</code>,\nprocessa-a de acordo com o seu <code>performative</code>:\n<ul>\n<li><code>\"cfp\"</code> \u2192 devolve PROPOSE ou REFUSE.</li>\n<li><code>\"accept-proposal\"</code> \u2192 executa o transporte.</li>\n<li><code>\"reject-proposal\"</code> \u2192 apenas log.</li>\n</ul></li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.supervisor_agent", "modulename": "agents.supervisor_agent", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "agents.supervisor_agent.SupervisorAgent", "modulename": "agents.supervisor_agent", "qualname": "SupervisorAgent", "kind": "class", "doc": "<p>Agente supervisor respons\u00e1vel pelo agendamento e atribui\u00e7\u00e3o de jobs.</p>\n\n<p>Este agente \u00e9 respons\u00e1vel por criar jobs periodicamente e coordenar um\nleil\u00e3o/negocia\u00e7\u00e3o com as m\u00e1quinas dispon\u00edveis usando um protocolo Contract Net Protocol (CNP). Cada job \u00e9 enviado como CFP\npara todas as m\u00e1quinas registadas, que podem propor um custo ou recusar\no job. O supervisor escolhe a proposta com menor custo (desempate aleat\u00f3rio em caso de empate). \nEnvia <code>accept-proposal</code> para a m\u00e1quina vencedora e <code>reject-proposal</code>\npara as restantes.</p>\n", "bases": "agents.base_agent.FactoryAgent"}, {"fullname": "agents.supervisor_agent.SupervisorAgent.__init__", "modulename": "agents.supervisor_agent", "qualname": "SupervisorAgent.__init__", "kind": "function", "doc": "<p>Inicializa o agente supervisor.</p>\n\n<p>Args:\n    jid (str): JID XMPP do agente.\n    password (str): Password associada ao JID.\n    env: Refer\u00eancia ao ambiente/simulador partilhado, usado para obter\n        o tempo atual (ticks) e registar m\u00e9tricas globais.\n    machines (list[str] | None): Lista de JIDs das m\u00e1quinas que ir\u00e3o\n        receber CFPs. Se <code>None</code>, \u00e9 usada uma lista vazia.\n    job_dispatch_every (int): N\u00famero de ticks entre despachos sucessivos\n        de novos jobs.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"n\">jid</span>, </span><span class=\"param\"><span class=\"n\">password</span>, </span><span class=\"param\"><span class=\"n\">env</span><span class=\"o\">=</span><span class=\"kc\">None</span>, </span><span class=\"param\"><span class=\"n\">machines</span><span class=\"o\">=</span><span class=\"kc\">None</span>, </span><span class=\"param\"><span class=\"n\">job_dispatch_every</span><span class=\"o\">=</span><span class=\"mi\">5</span></span>)</span>"}, {"fullname": "agents.supervisor_agent.SupervisorAgent.machines", "modulename": "agents.supervisor_agent", "qualname": "SupervisorAgent.machines", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supervisor_agent.SupervisorAgent.job_dispatch_every", "modulename": "agents.supervisor_agent", "qualname": "SupervisorAgent.job_dispatch_every", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supervisor_agent.SupervisorAgent.last_dispatch_time", "modulename": "agents.supervisor_agent", "qualname": "SupervisorAgent.last_dispatch_time", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supervisor_agent.SupervisorAgent.job_counter", "modulename": "agents.supervisor_agent", "qualname": "SupervisorAgent.job_counter", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supervisor_agent.SupervisorAgent.setup", "modulename": "agents.supervisor_agent", "qualname": "SupervisorAgent.setup", "kind": "function", "doc": "<p>Configura o agente supervisor ap\u00f3s o arranque.</p>\n\n<p>Este m\u00e9todo:</p>\n\n<ol>\n<li>Regista o agente no ambiente, (via <code>FactoryAgent</code>).</li>\n<li>Escreve uma mensagem de log com a configura\u00e7\u00e3o atual.</li>\n<li>Adiciona o comportamento <code>JobDispatcher</code> respons\u00e1vel por\ncriar e despachar jobs ciclicamente.</li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.supervisor_agent.SupervisorAgent.JobDispatcher", "modulename": "agents.supervisor_agent", "qualname": "SupervisorAgent.JobDispatcher", "kind": "class", "doc": "<p>Comportamento c\u00edclico respons\u00e1vel por criar e negociar jobs.</p>\n\n<p>Em cada execu\u00e7\u00e3o do ciclo, este comportamento:</p>\n\n<ol>\n<li>Verifica o tempo atual do ambiente.</li>\n<li>Se tiver passado pelo menos <code>job_dispatch_every</code> ticks desde o\n\u00faltimo job, cria um novo job com uma dura\u00e7\u00e3o aleat\u00f3ria.</li>\n<li>Envia uma CFP (<em>Call For Proposals</em>) para todas as m\u00e1quinas registadas.</li>\n<li>Aguarda respostas (<code>propose</code> ou <code>refuse</code>) durante uma janela\nde tempo limitada.</li>\n<li>Seleciona a proposta de menor custo e envia:\n<ul>\n<li><code>accept-proposal</code> \u00e0 m\u00e1quina vencedora;</li>\n<li><code>reject-proposal</code> \u00e0s restantes m\u00e1quinas que propuseram.</li>\n</ul></li>\n</ol>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.supervisor_agent.SupervisorAgent.JobDispatcher.run", "modulename": "agents.supervisor_agent", "qualname": "SupervisorAgent.JobDispatcher.run", "kind": "function", "doc": "<p>Executa um ciclo de despacho e negocia\u00e7\u00e3o de jobs.</p>\n\n<p>Este m\u00e9todo \u00e9 chamado repetidamente pelo motor de comportamentos\ndo SPADE. Em cada itera\u00e7\u00e3o pode ou n\u00e3o ser criado um novo job,\ndependendo do tempo decorrido desde o \u00faltimo despacho.</p>\n\n<p>Protocolo de mensagens:\n    - CFP:\n        * metadata:\n            - <code>protocol</code> = <code>\"job-dispatch\"</code>\n            - <code>performative</code> = <code>\"cfp\"</code>\n            - <code>thread</code> = ID \u00fanico para o job\n        * body (JSON):\n            - <code>job_id</code> (int)\n            - <code>duration</code> (int)\n    - PROPOSE:\n        * metadata:\n            - <code>protocol</code> = <code>\"job-dispatch\"</code>\n            - <code>performative</code> = <code>\"propose\"</code>\n            - <code>thread</code> = mesmo ID do job\n        * body (JSON):\n            - <code>cost</code> (num\u00e9rico): custo reportado pela m\u00e1quina.\n    - REFUSE:\n        * metadata:\n            - <code>protocol</code> = <code>\"job-dispatch\"</code>\n            - <code>performative</code> = <code>\"refuse\"</code>\n            - <code>thread</code> = mesmo ID do job\n        * body (JSON, opcional):\n            - <code>reason</code> (str): motivo da recusa.\n    - ACCEPT-PROPOSAL / REJECT-PROPOSAL:\n        * metadata:\n            - <code>protocol</code> = <code>\"job-dispatch\"</code>\n            - <code>performative</code> = <code>\"accept-proposal\"</code> ou\n              <code>\"reject-proposal\"</code>\n            - <code>thread</code> = mesmo ID do job\n        * body:\n            - No caso de <code>accept-proposal</code>: especifica\u00e7\u00e3o do job.\n            - No caso de <code>reject-proposal</code>: motivo da rejei\u00e7\u00e3o.</p>\n\n<p>Side Effects:\n    - Atualiza <code>env.metrics[\"jobs_created\"]</code>.\n    - Escreve mensagens de log com o estado do leil\u00e3o e decis\u00f5es\n      de sele\u00e7\u00e3o de m\u00e1quinas.</p>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.supplier_agent", "modulename": "agents.supplier_agent", "kind": "module", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent", "kind": "class", "doc": "<p>Agente fornecedor de materiais (Supplier).</p>\n\n<p>O supplier participa num CNP de recursos com as m\u00e1quinas\n(protocolo <code>\"supply-cnp\"</code>) e delega o transporte em robots\n(protocolo <code>\"transport-cnp\"</code>):</p>\n\n<ul>\n<li><p><code>\"supply-cnp\"</code> (M\u00e1quina - Supplier):</p>\n\n<ul>\n<li>CFP:\n<ul>\n<li>A m\u00e1quina envia pedido de materiais e posi\u00e7\u00e3o.</li>\n<li>O supplier verifica stock e estado (recharging ou n\u00e3o).</li>\n<li>Se puder fornecer, responde com PROPOSE (custo, dist\u00e2ncia,\nmateriais que consegue fornecer).</li>\n<li>Caso contr\u00e1rio, responde REFUSE (<code>\"no_stock\"</code> ou\n<code>\"recharging\"</code>).</li>\n</ul></li>\n<li>ACCEPT-PROPOSAL:\n<ul>\n<li>Reserva stock.</li>\n<li>Inicia um CNP de transporte com robots (<code>\"transport-cnp\"</code>).</li>\n</ul></li>\n<li>REJECT-PROPOSAL:\n<ul>\n<li>Apenas regista em log.</li>\n</ul></li>\n<li>INFORM (vindo do supplier para a m\u00e1quina):\n<ul>\n<li>Indica que os materiais foram entregues.</li>\n</ul></li>\n</ul></li>\n<li><p><code>\"transport-cnp\"</code> (Supplier - Robots):</p>\n\n<ul>\n<li>O supplier atua como iniciador, enviando CFP para todos os robots.</li>\n<li>Recolhe PROPOSE/REFUSE dos robots.</li>\n<li>Escolhe o robot com menor custo e envia ACCEPT-PROPOSAL.</li>\n<li>Quando recebe INFORM do robot vencedor, reencaminha INFORM final\npara a m\u00e1quina, indicando que os materiais chegaram.</li>\n</ul></li>\n</ul>\n\n<p>Gest\u00e3o de stock e recharging:</p>\n\n<ul>\n<li>Mant\u00e9m <code>max_stock_per_material</code> como valor m\u00e1ximo.</li>\n<li>Quando detecta falta de stock num pedido:\n<ul>\n<li>Muda para estado <code>recharging</code>.</li>\n<li>Regista o tick de in\u00edcio (<code>recharge_start_tick</code>).</li>\n<li>Durante <code>recharge_duration_ticks</code> recusa todos os pedidos\n(REFUSE <code>\"recharging\"</code>).</li>\n<li>Ao fim desse per\u00edodo, rep\u00f5e stock para o m\u00e1ximo em todos os\nmateriais e volta a aceitar pedidos.</li>\n</ul></li>\n</ul>\n", "bases": "agents.base_agent.FactoryAgent"}, {"fullname": "agents.supplier_agent.SupplierAgent.__init__", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.__init__", "kind": "function", "doc": "<p>Inicializa o agente supplier.</p>\n\n<p>Args:\n    jid (str): JID XMPP do agente.\n    password (str): Password associada ao JID.\n    env: Ambiente/simulador partilhado, usado para obter o tempo\n        em ticks e, se necess\u00e1rio, registar m\u00e9tricas.\n    name (str): Nome l\u00f3gico do supplier para efeitos de log.\n    stock_init (dict[str, int] | None): Stock inicial por material.\n        Se <code>None</code>, \u00e9 usado o stock m\u00e1ximo (<code>max_stock_per_material</code>)\n        para os materiais padr\u00e3o (<code>\"material_1\"</code> e\n        <code>\"material_2\"</code>).\n    position (tuple[float, float]): Posi\u00e7\u00e3o (x, y) do supplier.\n    robots (list[str] | None): Lista de JIDs de robots que podem\n        executar transportes para este supplier. Se <code>None</code>,\n        \u00e9 usada uma lista vazia.</p>\n", "signature": "<span class=\"signature pdoc-code multiline\">(<span class=\"param\">\t<span class=\"n\">jid</span>,</span><span class=\"param\">\t<span class=\"n\">password</span>,</span><span class=\"param\">\t<span class=\"n\">env</span><span class=\"o\">=</span><span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s1\">&#39;Supplier&#39;</span>,</span><span class=\"param\">\t<span class=\"n\">stock_init</span><span class=\"o\">=</span><span class=\"kc\">None</span>,</span><span class=\"param\">\t<span class=\"n\">position</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span>,</span><span class=\"param\">\t<span class=\"n\">robots</span><span class=\"o\">=</span><span class=\"kc\">None</span></span>)</span>"}, {"fullname": "agents.supplier_agent.SupplierAgent.agent_name", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.agent_name", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent.position", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.position", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent.max_stock_per_material", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.max_stock_per_material", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent.stock", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.stock", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent.recharging", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.recharging", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent.recharge_start_tick", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.recharge_start_tick", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent.recharge_duration_ticks", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.recharge_duration_ticks", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent.robots", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.robots", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent.pending_deliveries", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.pending_deliveries", "kind": "variable", "doc": "<p></p>\n"}, {"fullname": "agents.supplier_agent.SupplierAgent.setup", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.setup", "kind": "function", "doc": "<p>Configura o supplier ap\u00f3s o arranque.</p>\n\n<p>Este m\u00e9todo:</p>\n\n<ol>\n<li>Chama o <code>setup</code> base (<code>FactoryAgent</code>).</li>\n<li>Regista em log o stock inicial, a posi\u00e7\u00e3o e a lista de robots.</li>\n<li>Adiciona o comportamento <code>CNPBehaviour</code>, que trata tanto\ndo CNP de recursos (<code>\"supply-cnp\"</code>) como do CNP de transporte\n(<code>\"transport-cnp\"</code> do lado do supplier).</li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}, {"fullname": "agents.supplier_agent.SupplierAgent.CNPBehaviour", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.CNPBehaviour", "kind": "class", "doc": "<p>Comportamento CNP para materiais e transporte.</p>\n\n<p>Este comportamento lida com dois protocolos distintos:</p>\n\n<p>1) <code>\"supply-cnp\"</code> (M\u00e1quina - Supplier):\n    - CFP:\n        * Verifica se o supplier est\u00e1 em recharging.\n        * Se estiver, recusa o pedido (REFUSE <code>\"recharging\"</code>)\n          at\u00e9 terminar o per\u00edodo de recharging.\n        * Se o per\u00edodo de recharging tiver terminado, rep\u00f5e stock\n          e volta a aceitar pedidos.\n        * Verifica se h\u00e1 stock suficiente para o pedido:\n            - Se n\u00e3o houver, entra (ou permanece) em estado\n              <code>recharging</code> e responde REFUSE <code>\"no_stock\"</code>.\n            - Se houver, calcula custo (dist\u00e2ncia + 0.5 * quantidade\n              total) e responde PROPOSE.\n    - ACCEPT-PROPOSAL:\n        * Debita stock (reserva os materiais).\n        * Regista a entrega pendente em <code>pending_deliveries</code>.\n        * Inicia CNP de transporte com robots (protocolo\n          <code>\"transport-cnp\"</code>).\n    - REJECT-PROPOSAL:\n        * Apenas regista em log.</p>\n\n<p>2) <code>\"transport-cnp\"</code> (Supplier - Robots):\n    - INFORM:\n        * Recebido do robot ao concluir o transporte.\n        * Recupera a entrega pendente associada ao <code>thread_id</code>.\n        * Envia INFORM final para a m\u00e1quina, com\n          <code>status=\"delivered\"</code> e materiais entregues.</p>\n", "bases": "spade.behaviour.CyclicBehaviour"}, {"fullname": "agents.supplier_agent.SupplierAgent.CNPBehaviour.run", "modulename": "agents.supplier_agent", "qualname": "SupplierAgent.CNPBehaviour.run", "kind": "function", "doc": "<p>Processa uma mensagem CNP por itera\u00e7\u00e3o.</p>\n\n<p>Em cada itera\u00e7\u00e3o:</p>\n\n<ol>\n<li>Tenta receber uma mensagem com timeout de 1 segundo.</li>\n<li>Verifica o protocolo:\n<ul>\n<li><code>\"supply-cnp\"</code> - trata CFP/ACCEPT/REJECT de pedidos de materiais.</li>\n<li><code>\"transport-cnp\"</code> - trata INFORM de robots (entrega conclu\u00edda).</li>\n</ul></li>\n<li>Para <code>\"supply-cnp\"</code>:\n<ul>\n<li>Em CFP:\n<ul>\n<li>Aplica a l\u00f3gica de recharging e verifica\u00e7\u00e3o de stock.</li>\n<li>Devolve PROPOSE ou REFUSE.</li>\n</ul></li>\n<li>Em ACCEPT-PROPOSAL:\n<ul>\n<li>Reserva stock, regista entrega pendente e inicia CNP\nde transporte com robots.</li>\n</ul></li>\n<li>Em REJECT-PROPOSAL:\n<ul>\n<li>Apenas escreve log.</li>\n</ul></li>\n</ul></li>\n<li>Para <code>\"transport-cnp\"</code>:\n<ul>\n<li>Em INFORM:\n<ul>\n<li>Conclui a entrega pendente e envia INFORM final para\na m\u00e1quina.</li>\n</ul></li>\n</ul></li>\n</ol>\n", "signature": "<span class=\"signature pdoc-code condensed\">(<span class=\"param\"><span class=\"bp\">self</span></span><span class=\"return-annotation\">):</span></span>", "funcdef": "async def"}];

    // mirrored in build-search-index.js (part 1)
    // Also split on html tags. this is a cheap heuristic, but good enough.
    elasticlunr.tokenizer.setSeperator(/[\s\-.;&_'"=,()]+|<[^>]*>/);

    let searchIndex;
    if (docs._isPrebuiltIndex) {
        console.info("using precompiled search index");
        searchIndex = elasticlunr.Index.load(docs);
    } else {
        console.time("building search index");
        // mirrored in build-search-index.js (part 2)
        searchIndex = elasticlunr(function () {
            this.pipeline.remove(elasticlunr.stemmer);
            this.pipeline.remove(elasticlunr.stopWordFilter);
            this.addField("qualname");
            this.addField("fullname");
            this.addField("annotation");
            this.addField("default_value");
            this.addField("signature");
            this.addField("bases");
            this.addField("doc");
            this.setRef("fullname");
        });
        for (let doc of docs) {
            searchIndex.addDoc(doc);
        }
        console.timeEnd("building search index");
    }

    return (term) => searchIndex.search(term, {
        fields: {
            qualname: {boost: 4},
            fullname: {boost: 2},
            annotation: {boost: 2},
            default_value: {boost: 2},
            signature: {boost: 2},
            bases: {boost: 2},
            doc: {boost: 1},
        },
        expand: true
    });
})();